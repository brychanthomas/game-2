<!DOCTYPE html>
<html>
<head>
  <title>Game-2</title>
  <script src="//cdn.jsdelivr.net/npm/phaser@3.20.0/dist/phaser.js"></script>
</head>
<body>

<script>
var config = {
  type: Phaser.CANVAS,
  width: 1000,
  height: 600,
  pixelArt: true,
  physics: {
    default: 'arcade',
    arcade: {
      debug: true
    }
  },
  scene: {
    preload: preload,
    create: create,
    update: update
  }
};

var game = new Phaser.Game(config);

var player;
var cursors;
var obstacles;

function preload () {

  this.load.image('floor', 'assets/floor.png');
  this.load.image('player', 'assets/circle.png');
  this.load.image('obstacle','assets/obstacle.png');
  this.load.spritesheet('assets', 'assets/spritesheet.png', { frameWidth: 22, frameHeight: 22 });
}

function create () {

  this.add.image(1095, 730, 'floor').setScale(2);

  initialiseAnimations();

  player = this.physics.add.sprite(300,300, 'assets');
  player.setScale(4);
  //player.body.collideWorldBounds = true;

  obstacles = this.physics.add.staticGroup();
  obstacles.create(300, 200, 'obstacle');

  cursors = this.input.keyboard.createCursorKeys();

  this.cameras.main.setBounds(0, 0, 2190, 1460);
  this.cameras.main.setZoom(1);
  this.cameras.main.centerOn(player.x,player.y);

  this.physics.add.collider(player, obstacles);

}

function update () {
  if (cursors.left.isDown && player.x > 0)
  {
      player.setVelocityX(-200);
      player.setVelocityY(0);
      player.anims.play('left', true);

  }
  else if (cursors.right.isDown && player.x < 2190)
  {
      player.setVelocityX(200);
      player.setVelocityY(0);
      player.anims.play('right', true);
  }

  else
  {
      player.setVelocityX(0);

    if (cursors.up.isDown && player.y > 0)
    {
        player.setVelocityY(-200);
        player.anims.play('down', true);
    }
    else if (cursors.down.isDown && player.y < 1460) {
        player.setVelocityY(200);
        player.anims.play('up', true);
    }
    else {
        player.setVelocityY(0);
      }
  }
  this.cameras.main.pan(player.x, player.y, 0, 'Sine.easeInOut')
}

function initialiseAnimations() {
  game.anims.create({
      key: 'up',
      frames: game.anims.generateFrameNumbers('assets', { start: 0, end: 3 }),
      frameRate: 8,
      repeat: -1
  });
  game.anims.create({
    key: 'right',
    frames: game.anims.generateFrameNumbers('assets', { start: 4, end: 7 }),
    frameRate: 8,
    repeat: -1
  });
  game.anims.create({
    key: 'down',
    frames: game.anims.generateFrameNumbers('assets', { start: 9, end: 12 }),
    frameRate: 8,
    repeat: -1
  });
  game.anims.create({
    key: 'left',
    frames: game.anims.generateFrameNumbers('assets', { start: 13, end: 16 }),
    frameRate: 8,
    repeat: -1
  });
}
</script>

</body>
</html>
